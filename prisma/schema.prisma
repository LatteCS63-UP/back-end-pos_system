// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model MasProvince {
  ProvinceID     Int     @id
  ProvinceNameTh String  @unique @db.VarChar(255)
  ProvinceNameEn String? @unique @db.VarChar(255)

  RecordStatus String?       @db.VarChar(1)
  CreateDate   DateTime?     @db.DateTime
  CreateUser   String?       @db.VarChar(10)
  LastDate     DateTime?     @db.DateTime
  LastUser     String?       @db.VarChar(10)
  MasDistrict  MasDistrict[]
  Shop         Shop[]
}

model MasDistrict {
  DistrictID     Int     @id
  DistrictNameTh String  @db.VarChar(255)
  DistrictNameEn String? @db.VarChar(255)

  ProvinceID  Int?
  DistrictFK1 MasProvince? @relation(fields: [ProvinceID], references: [ProvinceID])

  RecordStatus   String?          @db.VarChar(1)
  CreateDate     DateTime?        @db.DateTime
  CreateUser     String?          @db.VarChar(10)
  LastDate       DateTime?        @db.DateTime
  LastUser       String?          @db.VarChar(10)
  MasSubDistrict MasSubDistrict[]
  Shop           Shop[]
}

model MasSubDistrict {
  SubDistrictID     Int     @id
  SubDistrictNameTh String  @db.VarChar(255)
  SubDistrictNameEn String? @db.VarChar(255)

  DistrictID     Int?
  SubDistrictFK1 MasDistrict? @relation(fields: [DistrictID], references: [DistrictID])

  RecordStatus String?   @db.VarChar(1)
  CreateDate   DateTime? @db.DateTime
  CreateUser   String?   @db.VarChar(10)
  LastDate     DateTime? @db.DateTime
  LastUser     String?   @db.VarChar(10)
  Shop         Shop[]
}

model MasJobTitle {
  JobTitleID   Int    @id @default(autoincrement())
  JobTitleName String @unique @db.VarChar(255)

  RecordStatus String?   @db.VarChar(1)
  CreateDate   DateTime? @db.DateTime
  CreateUser   String?   @db.VarChar(10)
  LastDate     DateTime? @db.DateTime
  LastUser     String?   @db.VarChar(10)

  SysAdmin SysAdmin[]
  Owner    Owner[]
  Employee Employee[]
}

model Shop {
  ShopID      Int    @id @default(autoincrement())
  ShopCode    String @unique @db.VarChar(255)
  ShopName    String @db.VarChar(255)
  ShopAddress String @db.VarChar(255)

  ProvinceID    Int
  DistrictID    Int
  SubDistrictID Int
  ShopFK1       MasProvince?    @relation(fields: [ProvinceID], references: [ProvinceID])
  ShopFK2       MasDistrict?    @relation(fields: [DistrictID], references: [DistrictID])
  ShopFK3       MasSubDistrict? @relation(fields: [SubDistrictID], references: [SubDistrictID])

  RecordStatus String?   @db.VarChar(1)
  CreateDate   DateTime? @db.DateTime
  CreateUser   String?   @db.VarChar(10)
  LastDate     DateTime? @db.DateTime
  LastUser     String?   @db.VarChar(10)

  Owner    Owner[]
  Employee Employee[]
  Customer Customer[]
}

model SysAdmin {
  SysAdminID Int @id @default(autoincrement())

  JobTitleID  Int?
  SysAdminFK1 MasJobTitle? @relation(fields: [JobTitleID], references: [JobTitleID])

  SysAdminUsername  String @unique @db.VarChar(255)
  SysAdminPassword  String @db.VarChar(255)
  SysAdminFirstname String @db.VarChar(255)
  SysAdminLastname  String @db.VarChar(255)

  RecordStatus String    @db.VarChar(1)
  CreateDate   DateTime  @db.DateTime
  CreateUser   String    @db.VarChar(10)
  LastDate     DateTime? @db.DateTime
  LastUser     String?   @db.VarChar(10)
}

model Owner {
  OwnerID         Int    @id @default(autoincrement())
  OwnerUsername   String @unique @db.VarChar(255)
  OwnerPassword   String @db.VarChar(255)
  OwnerFirst_name String @db.VarChar(100)
  OwnerLast_name  String @db.VarChar(100)

  JobTitleID Int?
  ShopID     Int?
  OwnerFK1   MasJobTitle? @relation(fields: [JobTitleID], references: [JobTitleID])
  OwnerFK2   Shop?        @relation(fields: [ShopID], references: [ShopID])

  RecordStatus String?   @db.VarChar(1)
  CreateDate   DateTime? @db.DateTime
  CreateUser   String?   @db.VarChar(10)
  LastDate     DateTime? @db.DateTime
  LastUser     String?   @db.VarChar(10)
}

model Employee {
  EmployeeID        Int     @id @default(autoincrement())
  EmployeeUsername  String  @unique @db.VarChar(255)
  EmployeePassword  String  @db.VarChar(255)
  EmployeeFirstname String  @db.VarChar(100)
  EmployeeLastname  String? @db.VarChar(100)

  JobTitleID  Int?
  ShopID      Int?
  EmployeeFK1 MasJobTitle? @relation(fields: [JobTitleID], references: [JobTitleID])
  EmployeeFK2 Shop?        @relation(fields: [ShopID], references: [ShopID])

  RecordStatus        String                @db.VarChar(1)
  CreateDate          DateTime              @db.DateTime
  CreateUser          String                @db.VarChar(10)
  LastDate            DateTime?             @db.DateTime
  LastUser            String?               @db.VarChar(10)
  BillProductExchange BillProductExchange[]
  ListOrderRequest    ListOrderRequest[]
  ListOrder           ListOrder[]
}

model Customer {
  CustomerID          Int     @id @default(autoincrement())
  CustomerUsername    String  @unique @db.VarChar(255)
  CustomerPassword    String  @db.VarChar(255)
  CustomerFirstname   String  @db.VarChar(255)
  CustomerLastname    String  @db.VarChar(255)
  CustomerPhoneNumber String? @db.VarChar(80)
  CustomerPoint       Int
  PositionCode        String  @db.VarChar(255)

  ShopID      Int?
  CustomerFK1 Shop? @relation(fields: [ShopID], references: [ShopID])

  RecordStatus        String                @db.VarChar(1)
  CreateDate          DateTime              @db.DateTime
  CreateUser          String                @db.VarChar(10)
  LastDate            DateTime?             @db.DateTime
  LastUser            String?               @db.VarChar(10)
  BillProductExchange BillProductExchange[]
  ListOrderRequest    ListOrderRequest[]
  Bill                Bill[]
}

model BillProductExchange {
  BillProductExchangeID Int @id @default(autoincrement())

  EmployeeID               Int?
  CustomerID               Int?
  BillProductExchangeEmFK  Employee? @relation(fields: [EmployeeID], references: [EmployeeID])
  BillProductExchangeCusFK Customer? @relation(fields: [CustomerID], references: [CustomerID])

  RecordStatus        String                @db.VarChar(1)
  CreateDate          DateTime              @db.DateTime
  CreateUser          String                @db.VarChar(10)
  LastDate            DateTime?             @db.DateTime
  LastUser            String?               @db.VarChar(10)
  ListProductExchange ListProductExchange[]
}

model ListProductExchange {
  ProductExchangeID      Int
  BillProductExchangeID  Int
  ListProductExchangeFK1 ProductExchange?     @relation(fields: [ProductExchangeID], references: [ProductExchangeID])
  ListProductExchangeFK2 BillProductExchange? @relation(fields: [BillProductExchangeID], references: [BillProductExchangeID])

  ProductExchangeCount Int
  TotalScore           Int

  RecordStatus String    @db.VarChar(1)
  CreateDate   DateTime  @db.DateTime
  CreateUser   String    @db.VarChar(10)
  LastDate     DateTime? @db.DateTime
  LastUser     String?   @db.VarChar(10)

  @@id([ProductExchangeID, BillProductExchangeID])
}

model ProductExchange {
  ProductExchangeID   Int    @id @default(autoincrement())
  ProductExchangeCode String @db.VarChar(255)
  ProductExchangeName String @unique @db.VarChar(255)
  ScorePoint          Int
  ProductExchangeImg  String @db.VarChar(255)

  RecordStatus        String                @db.VarChar(1)
  CreateDate          DateTime              @db.DateTime
  CreateUser          String                @db.VarChar(10)
  LastDate            DateTime?             @db.DateTime
  LastUser            String?               @db.VarChar(10)
  ListProductExchange ListProductExchange[]
}

model ListOrderRequest {
  OrderRequestID     Int    @id @default(autoincrement())
  OrderRequestStatus String @db.VarChar(10)

  CustomerID          Int?
  EmployeeID          Int?
  ListOrderRequestFK1 Customer? @relation(fields: [CustomerID], references: [CustomerID])
  ListOrderRequestFK2 Employee? @relation(fields: [EmployeeID], references: [EmployeeID])

  RecordStatus String         @db.VarChar(1)
  CreateDate   DateTime       @db.DateTime
  CreateUser   String         @db.VarChar(10)
  LastDate     DateTime?      @db.DateTime
  LastUser     String?        @db.VarChar(10)
  OrderRequest OrderRequest[]
}

model OrderRequest {
  OrderRequestID  Int
  ProductID       Int
  OrderRequestFK1 ListOrderRequest @relation(fields: [OrderRequestID], references: [OrderRequestID])
  OrderRequestFK2 Product          @relation(fields: [ProductID], references: [ProductID])

  ProductCount Int

  RecordStatus String    @db.VarChar(1)
  CreateDate   DateTime  @db.DateTime
  CreateUser   String    @db.VarChar(10)
  LastDate     DateTime? @db.DateTime
  LastUser     String?   @db.VarChar(10)

  @@id([OrderRequestID, ProductID])
}

model Product {
  ProductID    Int    @id @default(autoincrement())
  ProductCode  String @db.VarChar(255)
  ProductName  String @unique @db.VarChar(255)
  ProductPrice Int
  ProductImg   String @db.VarChar(255)

  RecordStatus String         @db.VarChar(1)
  CreateDate   DateTime       @db.DateTime
  CreateUser   String         @db.VarChar(10)
  LastDate     DateTime?      @db.DateTime
  LastUser     String?        @db.VarChar(10)
  OrderExport  OrderExport[]
  OrderRequest OrderRequest[]
}

model ListOrder {
  OrderID Int @id @default(autoincrement())

  EmployeeID   Int?
  ListOrderFK1 Employee? @relation(fields: [EmployeeID], references: [EmployeeID])

  RecordStatus String        @db.VarChar(1)
  CreateDate   DateTime      @db.DateTime
  CreateUser   String        @db.VarChar(10)
  LastDate     DateTime?     @db.DateTime
  LastUser     String?       @db.VarChar(10)
  OrderExport  OrderExport[]
}

model Bill {
  BillID  Int    @id @default(autoincrement())
  PayType String @db.VarChar(100)

  CustomerID Int?
  BillFK1    Customer? @relation(fields: [CustomerID], references: [CustomerID])

  RecordStatus String        @db.VarChar(1)
  CreateDate   DateTime      @db.DateTime
  CreateUser   String        @db.VarChar(10)
  LastDate     DateTime?     @db.DateTime
  LastUser     String?       @db.VarChar(10)
  OrderExport  OrderExport[]
}

model OrderExport {
  BillID         Int
  ProductID      Int
  OrderExportFK1 Bill?    @relation(fields: [BillID], references: [BillID])
  OrderExportFK2 Product? @relation(fields: [ProductID], references: [ProductID])

  OrderID        Int?
  OrderExportFK3 ListOrder? @relation(fields: [OrderID], references: [OrderID])

  ProductCount Int

  RecordStatus String    @db.VarChar(1)
  CreateDate   DateTime  @db.DateTime
  CreateUser   String    @db.VarChar(10)
  LastDate     DateTime? @db.DateTime
  LastUser     String?   @db.VarChar(10)

  @@id([BillID, ProductID])
}
